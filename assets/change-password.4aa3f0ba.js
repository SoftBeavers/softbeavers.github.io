import{_}from"./CreatePassword.vue.707f5dd6.js";import{d as h,a as v,n as y,c as b}from"./entry.9735f01e.js";import{u as P}from"./useToast.8e71c4db.js";import{j as k,a as d,r as T,H as V,I as E,V as o,J as p,u}from"./swiper-vue.1d376ba0.js";import"./Button.2f88cb6d.js";import"./index.82c56d46.js";import"./nuxt-link.d4120b4d.js";import"./FormGroup.6bea9444.js";const x={class:"d-flex justify-center my-20"},z=o("div",{class:"fy-form-footer fy-form-footer__register"},[o("button",{type:"submit",class:"btn btn-outline-primary-2"},[o("span",null,"Zapisz hasło"),o("i",{class:"icon-long-arrow-right"})])],-1),$=k({__name:"change-password",setup(B){const i=h("authorizationToken"),{$api:c}=b(),l=v(),m=P(),r=d(""),f=d(""),t=T({password:[],repeatedPassword:[]}),w=async a=>{a.preventDefault(),console.log(l.query);try{return i.value=await c("/users/change-password",{method:"POST",body:{password:r.value,repeatedPassword:r.value,passwordToken:l.query.token}}),console.log(i.value),y("/")}catch(s){if(!s.response)throw s;let e=s.response.status;if(e===403){m.add({title:"Link wygasł. Potwórz proces resetowania hasła.",color:"red"});return}if(e===422){g(s.response._data.validationErrors);return}throw s}},g=a=>{a.forEach(s=>{t[s.field].push(s.message)})};return(a,s)=>{const e=_;return V(),E("div",x,[o("form",{onSubmit:w},[p(e,{class:"mb-7",label:"Hasło","error-messages":u(t).password,"onUpdate:modelValue":s[0]||(s[0]=n=>r.value=n)},null,8,["error-messages"]),p(e,{label:"Powtórz hasło",class:"mb-7","error-messages":u(t).repeatedPassword,"onUpdate:modelValue":s[1]||(s[1]=n=>f.value=n)},null,8,["error-messages"]),z],32)])}}});export{$ as default};

import{x as h,d as f,n as v,c as T}from"./entry.d243ce33.js";import{u as y}from"./useToast.d3c6b3bf.js";import{a as t,r as g}from"./swiper-vue.0447e045.js";const k=()=>{const{$api:r}=T(),p=h(),c=y(),n=f("authorizationToken"),o=t(""),i=t(""),u=t(!1),e=g({email:[],password:[]}),m=async s=>{s.preventDefault(),e.email=[],e.password=[];try{n.value=await r("/users/login",{method:"POST",body:{email:o.value,password:i.value}})}catch(a){if(a.response&&a.response.status===422){l(a.response._data.validationErrors);return}throw a}n.value&&d()},w=async()=>{try{await r("/users/reset-password",{method:"POST",body:{email:o.value}}),u.value=!1,c.add({title:"Wiadomość z resetowaniem hasła została wysłana na Twój adres e-mail."})}catch(s){if(s.response&&s.response.status===422){l(s.response._data.validationErrors);return}throw s}},d=()=>{setTimeout(()=>{p.updateUser(),v("/")},500)},l=s=>{s.forEach(a=>{e[a.field].push(a.message)})};return{handleLogin:m,updateUser:d,resetPassword:w,email:o,password:i,isOpenForgotPassword:u,validationErrors:e}};export{k as u};

import{_}from"./CreatePassword.vue.e44dc2ae.js";import{d as h,a as v,n as y,c as b}from"./entry.d243ce33.js";import{u as P}from"./useToast.d3c6b3bf.js";import{j as k,a as p,r as T,I as E,J as V,W as o,L as d,u}from"./swiper-vue.0447e045.js";import"./Button.e2762217.js";import"./index.cdac5dfc.js";import"./Icon.1faf44f7.js";import"./nuxt-link.f906fa51.js";import"./FormGroup.cba233d6.js";const x={class:"d-flex justify-center my-20"},z=o("div",{class:"fy-form-footer fy-form-footer__register"},[o("button",{type:"submit",class:"btn btn-outline-primary-2"},[o("span",null,"Zapisz hasło"),o("i",{class:"icon-long-arrow-right"})])],-1),A=k({__name:"change-password",setup(B){const i=h("authorizationToken"),{$api:c}=b(),l=v(),m=P(),r=p(""),f=p(""),t=T({password:[],repeatedPassword:[]}),w=async a=>{a.preventDefault(),console.log(l.query);try{return i.value=await c("/users/change-password",{method:"POST",body:{password:r.value,repeatedPassword:r.value,passwordToken:l.query.token}}),console.log(i.value),y("/")}catch(s){if(!s.response)throw s;let e=s.response.status;if(e===403){m.add({title:"Link wygasł. Potwórz proces resetowania hasła.",color:"red"});return}if(e===422){g(s.response._data.validationErrors);return}throw s}},g=a=>{a.forEach(s=>{t[s.field].push(s.message)})};return(a,s)=>{const e=_;return E(),V("div",x,[o("form",{onSubmit:w},[d(e,{class:"mb-7",label:"Hasło","error-messages":u(t).password,"onUpdate:modelValue":s[0]||(s[0]=n=>r.value=n)},null,8,["error-messages"]),d(e,{label:"Powtórz hasło",class:"mb-7","error-messages":u(t).repeatedPassword,"onUpdate:modelValue":s[1]||(s[1]=n=>f.value=n)},null,8,["error-messages"]),z],32)])}}});export{A as default};
